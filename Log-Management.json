{
	"info": {
		"_postman_id": "log-management-api-v2-final",
		"name": "Log Management System API",
		"description": "Complete API collection for Log Management System with RBAC.\n\n**Updates:**\n- Fixed timestamps to Dec 2025\n- Added StandUP.com tenant examples\n- Fixed username formats\n- Added 'Get All Events' & 'Get All User Activity'\n\n**Variables:**\n- baseUrl: http://localhost:5004/api\n- token: Your JWT token (auto-set after login)\n- tenantId: Your tenant ID\n- username: Dynamic user for activity checks",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5004/api",
			"type": "string"
		},
		{
			"key": "token",
			"value": "",
			"type": "string"
		},
		{
			"key": "tenantId",
			"value": "1",
			"type": "string"
		},
		{
			"key": "username",
			"value": "alice",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "1. Authentication",
			"description": "User authentication endpoints - Start here!",
			"item": [
				{
					"name": "Signup (Create Viewer Account)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('token', response.token);",
									"    console.log('Account created! Token saved.');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"viewer@example.com\",\n  \"password\": \"password123\",\n  \"tenantName\": \"Lumiq-thailand.com\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/signup",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"signup"
							]
						},
						"description": "Create a new viewer account."
					},
					"response": []
				},
				{
					"name": "Login (Get Token)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.environment.set('token', response.token);",
									"    pm.environment.set('tenantId', response.user.tenantId || 'all');",
									"    console.log('Logged in as:', response.user.email);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"superadmin@gmail.com\",\n  \"password\": \"super12345\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/auth/login",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"login"
							]
						},
						"description": "Login to get JWT token."
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/auth/me",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"auth",
								"me"
							]
						},
						"description": "Get currently logged-in user info."
					},
					"response": []
				}
			]
		},
		{
			"name": "2. Log Ingestion",
			"description": "Ways to send logs to the system",
			"item": [
				{
					"name": "Ingest Single Log (Lumiq)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenant\": \"Lumiq-thailand.com\",\n  \"source\": \"api\",\n  \"event_type\": \"login_success\",\n  \"user\": \"alice\",\n  \"ip\": \"192.168.1.100\",\n  \"url\": \"/api/login\",\n  \"method\": \"POST\",\n  \"status_code\": 200,\n  \"timestamp\": \"2025-12-03T09:00:00Z\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/ingest/http",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"ingest",
								"http"
							]
						},
						"description": "Ingest a single log event via HTTP POST."
					},
					"response": []
				},
				{
					"name": "Ingest Multiple Logs (Lumiq Batch)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\n    \"tenant\": \"Lumiq-thailand.com\",\n    \"source\": \"api\",\n    \"event_type\": \"login_failed\",\n    \"user\": \"bob\",\n    \"ip\": \"192.168.1.101\",\n    \"timestamp\": \"2025-12-03T10:15:00Z\"\n  },\n  {\n    \"tenant\": \"Lumiq-thailand.com\",\n    \"source\": \"api\",\n    \"event_type\": \"login_failed\",\n    \"user\": \"bob\",\n    \"ip\": \"192.168.1.101\",\n    \"timestamp\": \"2025-12-03T10:20:00Z\"\n  },\n  {\n    \"tenant\": \"Lumiq-thailand.com\",\n    \"source\": \"api\",\n    \"event_type\": \"login_failed\",\n    \"user\": \"bob\",\n    \"ip\": \"192.168.1.101\",\n    \"timestamp\": \"2025-12-03T10:25:00Z\"\n  }\n]"
						},
						"url": {
							"raw": "{{baseUrl}}/ingest/batch",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"ingest",
								"batch"
							]
						},
						"description": "Ingest multiple log events at once."
					},
					"response": []
				},
				{
					"name": "Ingest Multiple Logs (StandUP)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\"tenant\": \"StandUP.com\", \"source\": \"web\", \"event_type\": \"page_view\", \"user\": \"frank\", \"ip\": \"10.0.0.1\", \"timestamp\": \"2025-12-03T12:00:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"app\", \"event_type\": \"click\", \"user\": \"sarah\", \"ip\": \"10.0.0.2\", \"timestamp\": \"2025-12-03T14:30:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"web\", \"event_type\": \"signup\", \"user\": \"mike\", \"ip\": \"10.0.0.3\", \"timestamp\": \"2025-12-04T09:15:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"api\", \"event_type\": \"upload\", \"user\": \"emily\", \"ip\": \"10.0.0.4\", \"timestamp\": \"2025-12-04T11:20:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"db\", \"event_type\": \"query\", \"user\": \"david\", \"ip\": \"10.0.0.5\", \"timestamp\": \"2025-12-04T16:45:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"web\", \"event_type\": \"logout\", \"user\": \"jessica\", \"ip\": \"10.0.0.6\", \"timestamp\": \"2025-12-05T08:10:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"app\", \"event_type\": \"error\", \"user\": \"tom\", \"ip\": \"10.0.0.7\", \"timestamp\": \"2025-12-05T13:25:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"api\", \"event_type\": \"login_failed\", \"user\": \"anna\", \"ip\": \"10.0.0.8\", \"timestamp\": \"2025-12-05T19:50:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"web\", \"event_type\": \"purchase\", \"user\": \"steve\", \"ip\": \"10.0.0.9\", \"timestamp\": \"2025-12-06T07:05:00Z\"},\n  {\"tenant\": \"StandUP.com\", \"source\": \"system\", \"event_type\": \"restart\", \"user\": \"admin_kev\", \"ip\": \"10.0.0.10\", \"timestamp\": \"2025-12-06T11:59:00Z\"}\n]"
						},
						"url": {
							"raw": "{{baseUrl}}/ingest/batch",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"ingest",
								"batch"
							]
						},
						"description": "Ingest 10 logs for StandUP.com with different users and unique timestamps between Dec 3-6, 2025."
					},
					"response": []
				}
			]
		},
		{
			"name": "3. Log Search",
			"description": "Search and filter logs",
			"item": [
				{
					"name": "Search Logs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/logs/search?tenant={{tenantId}}&from=2025-12-01T00:00:00Z&to=2025-12-10T23:59:59Z&q=login&page=1&limit=50",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"logs",
								"search"
							],
							"query": [
								{
									"key": "tenant",
									"value": "{{tenantId}}",
									"description": "Tenant ID or name"
								},
								{
									"key": "from",
									"value": "2025-12-01T00:00:00Z",
									"description": "Start date (Fixed to Dec 2025)"
								},
								{
									"key": "to",
									"value": "2025-12-10T23:59:59Z",
									"description": "End date (Fixed to Dec 2025)"
								},
								{
									"key": "q",
									"value": "login",
									"description": "Search query"
								},
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "50"
								}
							]
						},
						"description": "Search logs. **Updated date range to December 2025 to find the new data.**"
					},
					"response": []
				}
			]
		},
		{
			"name": "4. Dashboard",
			"description": "Dashboard data and metrics",
			"item": [
				{
					"name": "Get Dashboard Data",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/dashboard?tenant={{tenantId}}&timeRange=24h",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"dashboard"
							],
							"query": [
								{
									"key": "tenant",
									"value": "{{tenantId}}"
								},
								{
									"key": "timeRange",
									"value": "24h"
								}
							]
						},
						"description": "Get dashboard summary."
					},
					"response": []
				}
			]
		},
		{
			"name": "5. Alerts",
			"description": "View and manage security alerts",
			"item": [
				{
					"name": "Get All Alerts",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/alerts?tenant=all&status=all&timeRange=7d",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"alerts"
							],
							"query": [
								{
									"key": "tenant",
									"value": "all",
									"description": "Set to 'all' to see alerts for Lumiq-thailand.com and others"
								},
								{
									"key": "status",
									"value": "all",
									"description": "Filter: all, OPEN, INVESTIGATING, RESOLVED"
								},
								{
									"key": "timeRange",
									"value": "7d",
									"description": "7d to cover the Dec 3-6 date range"
								}
							]
						},
						"description": "Get all alerts for ALL tenants.\n\n**Note:** We use `tenant=all` because you are the Super Admin and want to see everything."
					},
					"response": []
				},
				{
					"name": "Create Failed Login Alert",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\"tenant\": \"Lumiq-thailand.com\", \"source\": \"api\", \"event_type\": \"login_failed\", \"user\": \"testuser\", \"ip\": \"192.168.1.100\", \"timestamp\": \"2025-12-03T20:00:00Z\"},\n  {\"tenant\": \"Lumiq-thailand.com\", \"source\": \"api\", \"event_type\": \"login_failed\", \"user\": \"testuser\", \"ip\": \"192.168.1.100\", \"timestamp\": \"2025-12-03T20:01:00Z\"},\n  {\"tenant\": \"Lumiq-thailand.com\", \"source\": \"api\", \"event_type\": \"login_failed\", \"user\": \"testuser\", \"ip\": \"192.168.1.100\", \"timestamp\": \"2025-12-03T20:02:00Z\"}\n]"
						},
						"url": {
							"raw": "{{baseUrl}}/ingest/batch",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"ingest",
								"batch"
							]
						},
						"description": "Send 3 failed login attempts."
					},
					"response": []
				},
				{
					"name": "Auto-Resolve Alert",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"tenant\": \"Lumiq-thailand.com\",\n  \"source\": \"api\",\n  \"event_type\": \"login_success\",\n  \"user\": \"testuser\",\n  \"ip\": \"192.168.1.100\",\n  \"timestamp\": \"2025-12-03T20:05:00Z\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/ingest/http",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"ingest",
								"http"
							]
						},
						"description": "Send a successful login."
					},
					"response": []
				},
				{
					"name": "Update Alert Status (Viewer Only)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"INVESTIGATING\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/alerts/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"alerts",
								"1"
							]
						},
						"description": "Update alert status."
					},
					"response": []
				}
			]
		},
		{
			"name": "6. User Activity",
			"description": "Track user activity and events",
			"item": [
				{
					"name": "Get Users List",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users?tenant={{tenantId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users"
							],
							"query": [
								{
									"key": "tenant",
									"value": "{{tenantId}}"
								}
							]
						},
						"description": "Get list of users for a tenant."
					},
					"response": []
				},
				{
					"name": "Get User Activity",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/{{username}}/activity?tenant={{tenantId}}&timeRange=7d",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"{{username}}",
								"activity"
							],
							"query": [
								{
									"key": "tenant",
									"value": "{{tenantId}}"
								},
								{
									"key": "timeRange",
									"value": "7d",
									"description": "Set to 7d so you can see events from earlier this week"
								}
							]
						},
						"description": "Get detailed activity for a specific user.\n\n**Dynamic User:** Change the `username` variable in your collection to switch users (e.g., alice, bob, anna)."
					},
					"response": []
				},
				{
					"name": "Get All User Activity",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/users/all/activity?tenant={{tenantId}}&timeRange=7d",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"users",
								"all",
								"activity"
							],
							"query": [
								{
									"key": "tenant",
									"value": "{{tenantId}}"
								},
								{
									"key": "timeRange",
									"value": "7d",
									"description": "Set to 7d so you can see events from earlier this week"
								}
							]
						},
						"description": "Get detailed activity for all users."
					},
					"response": []
				},
				{
					"name": "Get all events",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/logs/search?tenant=all&from=2025-12-01T00:00:00Z&to=2025-12-10T23:59:59Z&limit=100",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"logs",
								"search"
							],
							"query": [
								{
									"key": "tenant",
									"value": "all",
									"description": "Using 'all' forces the API to show data from ALL tenants (Requires Super Admin)"
								},
								{
									"key": "from",
									"value": "2025-12-01T00:00:00Z",
									"description": "Start Date"
								},
								{
									"key": "to",
									"value": "2025-12-10T23:59:59Z",
									"description": "End Date"
								},
								{
									"key": "limit",
									"value": "100",
									"description": "Get many results"
								}
							]
						},
						"description": "Retrieves all events for ALL tenants (Super Admin view).\n\n**Note:** We set tenant=all to bypass specific tenant ID filtering."
					},
					"response": []
				}
			]
		},
		{
			"name": "7. Tenants",
			"description": "Manage tenants (organizations)",
			"item": [
				{
					"name": "Get All Tenants",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/tenants",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tenants"
							]
						},
						"description": "Get list of all tenants."
					},
					"response": []
				},
				{
					"name": "Create Tenant (Admin Only)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"New Company Inc\",\n  \"key\": \"NEWCOMPANY\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/tenants",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tenants"
							]
						},
						"description": "Create a new tenant."
					},
					"response": []
				},
				{
					"name": "Get Tenant by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/tenants/{{tenantId}}",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"tenants",
								"{{tenantId}}"
							]
						},
						"description": "Get details for a specific tenant by ID."
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{token}}",
				"type": "string"
			}
		]
	}
}